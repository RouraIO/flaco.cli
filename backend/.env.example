# Flaco AI License Server - Environment Variables
# Copy this to .env and fill in your values

# ============================================
# STRIPE CONFIGURATION (Required)
# ============================================

# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_xxxxx  # Use sk_live_xxxxx for production

# Get from: https://dashboard.stripe.com/webhooks
STRIPE_WEBHOOK_SECRET=whsec_xxxxx

# Stripe Price IDs (create products in Stripe Dashboard)
STRIPE_PRICE_PRO_MONTHLY=price_xxxxx
STRIPE_PRICE_PRO_ANNUAL=price_xxxxx
STRIPE_PRICE_ENTERPRISE_MONTHLY=price_xxxxx

# Redirect URLs after checkout
STRIPE_SUCCESS_URL=https://flaco.ai/success?session_id={CHECKOUT_SESSION_ID}
STRIPE_CANCEL_URL=https://flaco.ai/pricing
STRIPE_RETURN_URL=https://flaco.ai/account

# ============================================
# LICENSE KEY GENERATION (Required)
# ============================================

# Secret key for HMAC signing (generate with: openssl rand -hex 32)
FLACO_LICENSE_SECRET=your-secret-key-here-change-me-in-production

# Optional: allow secret rotation (accepts licenses issued with the previous secret)
# FLACO_LICENSE_SECRET_PREVIOUS=your-old-secret-key

# ============================================
# EMAIL DELIVERY (Choose One)
# ============================================

# Option 1: SendGrid (Recommended)
# Get free API key from: https://sendgrid.com
SENDGRID_API_KEY=SG.xxxxx

# Option 2: SMTP (Fallback)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password

# Email sender details
FROM_EMAIL=licenses@roura.io
FROM_NAME=Flaco AI

# ============================================
# DATABASE (Optional - for license storage)
# ============================================

# PostgreSQL (recommended for production)
# DATABASE_URL=postgresql://user:pass@localhost:5432/flaco_licenses

# SQLite (good for development)
# DATABASE_URL=sqlite:///licenses.db

# Durable SQLite storage used by this server (recommended for small deployments)
# In production, set this to a persistent disk path.
# LICENSE_DB_PATH=./data/flaco_licenses.sqlite3

# Path to the PRO examples markdown served by /api/examples/pro.
# Keep this file on the server only (do NOT ship it in the CLI package).
# PRO_EXAMPLES_PATH=./data/examples_pro.md

# ============================================
# SERVER CONFIGURATION
# ============================================

# Port to run on
PORT=5000

# Environment (development or production)
FLASK_ENV=development

# ============================================
# MONITORING (Optional)
# ============================================

# Sentry for error tracking
# SENTRY_DSN=https://xxxxx@sentry.io/xxxxx

# ============================================
# SETUP INSTRUCTIONS
# ============================================

# 1. Copy this file to .env:
#    cp .env.example .env

# 2. Generate license secret:
#    openssl rand -hex 32

# 3. Set up Stripe account:
#    - Create account at https://stripe.com
#    - Get API keys from Dashboard > Developers > API keys
#    - Create products (PRO Monthly, PRO Annual, Enterprise)
#    - Get price IDs from each product
#    - Create webhook endpoint pointing to https://yourdomain.com/webhooks/stripe
#    - Copy webhook signing secret

# 4. Set up SendGrid:
#    - Create free account at https://sendgrid.com
#    - Create API key with "Mail Send" permissions
#    - Verify sender email

# 5. Install dependencies:
#    pip install -r requirements.txt

# 6. Run server:
#    python app.py

# 7. Test webhook locally with Stripe CLI:
#    stripe listen --forward-to localhost:5000/webhooks/stripe
